version: '2.1'

services:
  amadeus-nginx:
    image: 630542070554.dkr.ecr.eu-central-1.amazonaws.com/flight/invia/service/amadeus/nginx:latest
    container_name: amadeus-nginx
    volumes:
      - ./web:/var/www/web
      - amadeus-php-sock:/sock

  amadeus-php:
    image: 630542070554.dkr.ecr.eu-central-1.amazonaws.com/flight/invia/service/amadeus/app:latest
    container_name: amadeus-php
    volumes:
      - ./:/var/www
      - amadeus-php-sock:/sock

  redis:
    image: redis:3.2.4
    container_name: amadeus-redis

  amadeus-phiremock:
    image: 630542070554.dkr.ecr.eu-central-1.amazonaws.com/flight/invia/service/amadeus/app:latest
    container_name: service-amadeus-phiremock
    volumes:
    - ./:/var/www
    command: vendor/bin/phiremock -p 18080 -i 0.0.0.0

volumes:
  amadeus-php-sock:
